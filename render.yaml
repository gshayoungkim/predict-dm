services:
  - type: web
    name: predict-dm
    env: python
    region: singapore
    plan: free
    buildCommand: |
      pip install --upgrade pip setuptools wheel
      pip install --only-binary=:all: numpy==1.26.2
      pip install --only-binary=:all: pandas==2.1.4
      pip install --only-binary=:all: scikit-learn==1.3.2
      pip install fastapi==0.104.1 uvicorn[standard]==0.24.0 joblib==1.3.2 pydantic==2.5.0
      python train_model.py
    startCommand: uvicorn main:app --host 0.0.0.0 --port 10000